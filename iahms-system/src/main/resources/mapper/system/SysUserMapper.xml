<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper 
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.apkr.system.mapper.SysUserMapper">

    <resultMap id="SysUserResult" type="SysUser">
        <id     property="id"           column="id"           />
        <result property="username"     column="username"     />
        <result property="nickname"     column="nickname"     />
        <result property="phoneNumber"  column="phone_number" />
        <result property="gender"       column="gender"       />
        <result property="avatar"       column="avatar"       />
        <result property="password"     column="password"     />
        <result property="status"       column="status"       />
        <result property="delFlag"      column="del_flag"     />
        <result property="revision"     column="revision"     />
        <result property="createdBy"    column="create_by"    />
        <result property="createdTime"  column="create_time"  />
        <result property="updatedBy"    column="update_by"    />
        <result property="updatedTime"  column="update_time"  />
<!--        <collection  property="roles"   javaType="java.util.List"  resultMap="RoleResult" />-->
    </resultMap>

    <!-- SysUser条件查询 -->
    <select id="selectUserList" parameterType="SysUser" resultMap="SysUserResult">
        select id, username, nickname, gender, avatar, phone_number, status, del_flag, tenant_id, revision, created_by, created_time, updated_by, updated_time
        from sys_user
        <where>
            <!-- 用户名（登录用） -->
            <if test="username != null and username != ''">
                and username = #{username}
            </if>
            <!-- 昵称（展示用） -->
            <if test="nickname != null and nickname != ''">
                and nickname like concat('%', #{nickname}, '%')
            </if>
            <!-- 电话号码 -->
            <if test="phoneNumber != null and phoneNumber != ''">
                and phone_number = #{phoneNumber}
            </if>
            <!-- 是否启用 -->
            <if test="status != null and status != ''">
                and status = #{status}
            </if>
            <!-- 是否删除 -->
            <if test="delFlag != null and delFlag != ''">
                and delFag = #{delFlag}
            </if>
        </where>
    </select>

</mapper>